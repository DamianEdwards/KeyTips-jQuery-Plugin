/*!
* jQuery KeyTips Plugin 1.0.6
* Copyright 2011, Damian Edwards http://damianedwards.com
* Licensed under Ms-PL
* http://www.opensource.org/licenses/MS-PL
*/
(function(n){function i(n,t){if(!t)return;typeof Debug!="undefined"&&Debug.writeln,window.console&&window.console.log&&window.console.log(n),window.opera&&window.opera.postError(n),window.debugService&&window.debugService.trace(n)}function f(n){var t=n.replace(/(:|\.)/g,"\\$1");return t==="#"?"":t}function e(t){var i=f("#"+n(t).attr("for"));return n.trim(i!==""?n(i+"[accesskey]").attr("accesskey")||n(t).attr("accesskey"):n(t).attr("accesskey"))}function p(t,i){var r=n(t);return r.is("label")?i.offsets.label:r.is(":button, :submit, :reset, :image")?i.offsets.button:r.is("a")?i.offsets.anchor:r.is(":text, textarea")?i.offsets.text:i.offsets.other}function l(t,i){var r,f,u;return r=i.pushPopupToLabel?n(i.startLabelTag+"."+i.startLabelClass,t):n(t),r.length===0&&(r=n(t)),r.is(":hidden")||r.css("visibility")==="hidden"?!1:(f=r.offset(),u=p(t,i),{left:f.left+u.left,top:f.top+u.top})}function c(t,i,r){var e=l(t,r),f;if(e)return f=n("<div/>").text(i).css("left",e.left).css("top",e.top).addClass(r.popupClass).appendTo("body").get(0),u.push(f),o.push(t),f}function y(){n(u).remove(),u=[],o=[]}function w(t,i){t.find("label[for], label[accesskey]").each(function(){var o=e(this),r,t,f,s,h,u;if(typeof o=="undefined"||o==="")return!0;r=n(this).html(),t=r.toUpperCase().indexOf(o.toUpperCase());if(t<0)return!0;f="<"+i.accessKeyTag+">"+r.substr(t,1)+"</"+i.accessKeyTag+">",i.pushPopupToLabel&&t===0&&(f="<"+i.accessKeyTag+"><"+i.startLabelTag+" class='"+i.startLabelClass+"'>"+r.substr(t,1)+"</"+i.startLabelTag+"></"+i.accessKeyTag+">"),s=r.substring(0,t),h=r.substr(t+1),u=s+f+h,r.indexOf(f)<0&&(i.pushPopupToLabel&&t>0&&(u="<"+i.startLabelTag+" class='"+i.startLabelClass+"'>"+u.substr(0,1)+"</"+i.startLabelTag+">"+u.substr(1)),n(this).html(u))})}function b(t,i){var r;i.highlightMode==="popup"&&(y(t),r=[],t.find("label > "+i.accessKeyTag).each(function(){var s=n(this).text(),t=n(this).parent(),o=f("#"+t.attr("for")),h=o!=="#"?n(o):null,u=e(t);u&&s.toUpperCase()===u.toUpperCase()&&c(t[0],u,i),r.push(h[0])}),t.find("a[href][accesskey], textarea[accesskey], input[accesskey], button[accesskey]").each(function(){n.inArray(this,r)===-1&&c(this,this.accessKey,i)}))}function h(i,r,s){var h=0;s.highlightMode==="popup"?n.each(u,function(){var r=o[h],t=l(r,s);h++,n(this).css("left",t.left).css("top",t.top).toggle(i)}):s.highlightMode==="toggleClass"&&r.find("label > "+s.accessKeyTag).each(function(){var u=n(this).text(),r=n(this).parent(),o=f("#"+r.attr("for")),t=e(r);t&&u.toUpperCase()!==t.toUpperCase()||n(this).toggleClass(s.highlightClass,i)}),t=i}function v(n,t){h(!0,n,t)}function r(n,t){h(!1,n,t)}var a=!/opera/.test(navigator.userAgent),s=n.browser.mozilla,t=!1,u=[],o=[];n.fn.keyTips=function(u){var e=this,f;if(!a)return;f=n.extend({debug:!1,highlightClass:"KeyTips__highlighted",popupClass:"KeyTips__popup",startLabelClass:"KeyTips__startLabel",startLabelTag:"span",pushPopupToLabel:!1,highlightMode:"popup",accessKeyTag:"em",offsets:{label:{left:-20,top:2},button:{left:-3,top:-3},anchor:{left:2,top:9},text:{left:-3,top:-3},other:{left:-3,top:-3}}},u),n(document).bind("keydown.keytips",function(n){i("KeyTips document.keyDown: keyCode="+n.keyCode+", altKey="+n.altKey+", shiftKey="+n.shiftKey,f.debug),!t&&(n.keyCode===18&&!s||n.keyCode===16&&n.altKey&&s||n.keyCode===18&&n.shiftKey&&s)&&v(e,f)}).bind("keyup.keytips",function(n){i("KeyTips document.keyUp: keyCode="+n.keyCode+", altKey="+n.altKey+", shiftKey="+n.shiftKey,f.debug),t&&r(e,f)}),n(window).bind("resize.keytips",function(){i("resize event",f.debug),t&&f.highlightMode==="popup"&&r(e,f)}).bind("blur.keytips",function(){i("blur event",f.debug),t&&r(e,f)}).bind("focus.keytips",function(){i("focus event",f.debug),t&&r(e,f)}),w(e,f),b(e,f),n(window).unload(function(){n(document).unbind(".keytips"),n(window).unbind(".keytips")})},n.keyTips=function(t){n("body").keyTips(t)}})(jQuery)